!function(e){e.fn.noo_upload=function(a){var o={max_file_size:"2mb",runtimes:"html5,flash,html4",multipart:!0,urlstream_upload:!0,max_files:0,upload_enabled:!0,multi_upload:!1,url:nooUpload.url,delete_url:nooUpload.delete_url,flash_swf_url:nooUpload.flash_swf_url,resize:{}};a=e.extend(o,a);var t=a.flash_swf_url,i=a.tag_thumb,n=e("#"+i),l=a.input_name,r=a.multi_upload,d=new plupload.Uploader({browse_button:a.browse_button,file_data_name:"aaiu_upload_file",multi_selection:a.multi_upload,url:a.url,flash_swf_url:t,filters:[{title:"extensions",extensions:"jpg,jpeg,gif,png"}],resize:a.resize,views:{thumb:!0},init:{PostInit:function(){n.innerHTML=""},FilesAdded:function(o,t){plupload.each(t,function(o){r===!1?e("#"+a.browse_button).next(".noo_upload-status").get(0).innerHTML='<div id="'+o.id+'">'+o.name+" ("+plupload.formatSize(o.size)+") <b></b></div>":e("#"+a.browse_button).next(".noo_upload-status").get(0).innerHTML+='<div id="'+o.id+'">'+o.name+" ("+plupload.formatSize(o.size)+") <b></b></div>"}),d.start()},UploadProgress:function(a,o){e("#"+o.id)&&(e("#"+o.id).find("b").get(0).innerHTML="<span>"+o.percent+"%</span>")},Error:function(e,a){r===!1?n.html("\nError #"+a.code+": "+a.message):n.get(0).innerHTML+="\nError #"+a.code+": "+a.message},FileUploaded:function(a,o,t){var i=e.parseJSON(t.response);e("#"+o.id).remove(),i.success&&(r===!1?n.append('<div class="image-upload-thumb"><img width="150" src="'+i.image+'" /><input type="hidden" name="'+l+'" value="'+i.image_id+'" /><a class="delete-uploaded" data-fileid="'+i.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>'):n.append('<div class="image-upload-thumb"><img width="150" src="'+i.image+'" /><input type="hidden" name="'+l+'[]" value="'+i.image_id+'" /><a class="delete-uploaded" data-fileid="'+i.image_id+'" href="#" title="'+nooUpload.remove_txt+'"><i class="fa fa-times-circle"></i></a></div>'))}}});d.init(),n.on("click",".image-upload-thumb .delete-uploaded",function(a){a.preventDefault();var o=e(this);o.parent(".image-upload-thumb").remove();var t={attach_id:o.data("fileid")};return e.post(nooUpload.delete_url,t),!1})}}(jQuery);
